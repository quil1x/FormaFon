name: Deploy Flutter Web to GitHub Pages

on:
  push:
    branches:
      - main # <--- Ð—ÐÐ—ÐÐÐ§ Ð¢Ð£Ð¢ ÐÐÐ—Ð’Ð£ Ð¢Ð’ÐžÐ„Ð‡ ÐžÐ¡ÐÐžÐ’ÐÐžÐ‡ Ð“Ð†Ð›ÐšÐ˜ (main Ð°Ð±Ð¾ master)

jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write # Ð”Ð¾Ð·Ð²Ñ–Ð» Ð½Ð° Ð·Ð°Ð¿Ð¸Ñ, Ñ‰Ð¾Ð± ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸/Ð¾Ð½Ð¾Ð²Ð¸Ñ‚Ð¸ Ð³Ñ–Ð»ÐºÑƒ gh-pages

    steps:
      - name: Checkout ðŸ›Žï¸
        uses: actions/checkout@v4 # Ð‘ÐµÑ€Ðµ Ñ‚Ð²Ñ–Ð¹ ÐºÐ¾Ð´ Ð· Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ñ–ÑŽ

      - name: Setup Flutter ðŸ¦
        uses: subosito/flutter-action@v2 # ÐÐ°Ð»Ð°ÑˆÑ‚Ð¾Ð²ÑƒÑ” Flutter
        with:
          channel: 'stable' # ÐÐ±Ð¾ 'beta', 'dev', Ð·Ð°Ð»ÐµÐ¶Ð½Ð¾ Ð²Ñ–Ð´ Ñ‚Ð²Ð¾Ñ—Ñ… Ð¿Ð¾Ñ‚Ñ€ÐµÐ±

      - name: Install dependencies ðŸ“¦
        run: flutter pub get # Ð’ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÑŽÑ” Ð·Ð°Ð»ÐµÐ¶Ð½Ð¾ÑÑ‚Ñ– Ð· pubspec.yaml

      - name: Build web app ðŸ—ï¸
        # !!!!! Ð”Ð£Ð–Ð• Ð’ÐÐ–Ð›Ð˜Ð’Ðž !!!!!
        # Ð—ÐÐœÐ†ÐÐ˜ "/myportfolio/" Ð½Ð° Ð¢ÐžÐ§ÐÐ£ ÐÐÐ—Ð’Ð£ Ð¢Ð’ÐžÐ“Ðž Ð Ð•ÐŸÐžÐ—Ð˜Ð¢ÐžÐ Ð†Ð® Ð½Ð° GitHub!
        # ÐÐ°Ð¿Ñ€Ð¸ÐºÐ»Ð°Ð´, ÑÐºÑ‰Ð¾ Ñ‚Ð²Ñ–Ð¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ñ–Ð¹ Ð½Ð°Ð·Ð¸Ð²Ð°Ñ”Ñ‚ÑŒÑÑ "FormaFon-Lviv-App", Ñ‚Ð¾ Ð±ÑƒÐ´Ðµ "/FormaFon-Lviv-App/"
        run: flutter build web --release --base-href /FormaFon/ # <--- Ð—ÐœÐ†ÐÐ˜ Ð¦Ð•Ð™ Ð Ð¯Ð”ÐžÐš!

      - name: Deploy to GitHub Pages ðŸš€
        uses: peaceiris/actions-gh-pages@v4
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }} # Ð¡Ð¿ÐµÑ†Ñ–Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ñ‚Ð¾ÐºÐµÐ½ Ð´Ð»Ñ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ñƒ
          publish_dir: ./build/web # ÐŸÐ°Ð¿ÐºÐ°, ÑÐºÑƒ Ð¿ÑƒÐ±Ð»Ñ–ÐºÑƒÑ”Ð¼Ð¾ (Ð·Ð²Ñ–Ð´ÑÐ¸ Ð±ÐµÑ€ÐµÑ‚ÑŒÑÑ Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ð¹ ÑÐ°Ð¹Ñ‚)
          # Ð—Ð° Ð·Ð°Ð¼Ð¾Ð²Ñ‡ÑƒÐ²Ð°Ð½Ð½ÑÐ¼ Ð¿ÑƒÐ±Ð»Ñ–ÐºÑƒÑ” Ñƒ Ð³Ñ–Ð»ÐºÑƒ gh-pages
          publish_branch: gh-pages # <--- Ð¯Ð²Ð½Ð¾ Ð²ÐºÐ°Ð·ÑƒÑ”Ð¼Ð¾ Ð³Ñ–Ð»ÐºÑƒ gh-pages
          # force_orphan: true # ÐœÐ¾Ð¶Ð½Ð° Ñ€Ð¾Ð·ÐºÐ¾Ð¼ÐµÐ½Ñ‚ÑƒÐ²Ð°Ñ‚Ð¸, ÑÐºÑ‰Ð¾ Ñ…Ð¾Ñ‡ÐµÑˆ Ð¿Ñ€Ð¸Ð¼ÑƒÑÐ¾Ð²Ð¾ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿Ð¸ÑÑƒÐ²Ð°Ñ‚Ð¸ Ñ–ÑÑ‚Ð¾Ñ€Ñ–ÑŽ gh-pages